---
const currentYear = new Date().getFullYear();

const footerLinks = {
  discover: [
    { label: 'Science Sunday', href: '/science-sunday' },
    { label: 'Projects', href: '/projects' },
    { label: 'Charter', href: '/charter' },
    { label: 'Blog', href: '/blog' },
  ],
  community: [
    { label: 'Discord', href: 'https://discord.smarterwithscience.org', external: true },
    { label: 'GitHub', href: 'https://github.com/SmarterWithScience', external: true },
    { label: 'Newsletter', href: '/newsletter' },
    { label: 'Events', href: '/events' },
  ],
  pods: [
    { label: 'Ocean ViSION', href: '/pods/ocean-vision' },
    { label: 'AI Impact Ventures', href: '/pods/ai-impact' },
    { label: 'Quantum Biology', href: '/pods/quantum-biology' },
    { label: 'Community Resilience', href: '/pods/community-resilience' },
  ],
  resources: [
    { label: 'Agent Lab', href: '/resources/agent-lab' },
    { label: 'Cloud Data Lab', href: '/resources/cloud-lab' },
    { label: 'FAIR Guidelines', href: '/resources/fair-data' },
    { label: 'Get Started', href: '/get-started' },
  ],
};
---

<footer class="footer">
  <div class="footer-bg">
    <div class="grid-overlay"></div>
    <div class="particle-field"></div>
  </div>
  
  <div class="footer-content">
    <!-- Main Footer Content -->
    <div class="footer-main">
      <div class="footer-grid">
        <!-- Brand Section -->
        <div class="footer-brand">
          <div class="brand-header">
            <div class="warp-core-large"></div>
            <h3 class="brand-title">Smarter with Science</h3>
          </div>
          <p class="brand-tagline">Science plus community equals exponential impact.</p>
          <p class="brand-description">
            Accelerating scientific discovery through community power, computational resources, 
            and open collaboration. Every curious mind can spark the next breakthrough.
          </p>
          <div class="social-links">
            <a href="https://discord.smarterwithscience.org" class="social-link" aria-label="Discord">
              <div class="social-icon discord"></div>
            </a>
            <a href="https://github.com/SmarterWithScience" class="social-link" aria-label="GitHub">
              <div class="social-icon github"></div>
            </a>
            <a href="https://twitter.com/ScienceStanley" class="social-link" aria-label="Twitter">
              <div class="social-icon twitter"></div>
            </a>
          </div>
        </div>

        <!-- Links Sections -->
        <div class="footer-links">
          <div class="link-section">
            <h4 class="section-title">Discover</h4>
            <ul class="link-list">
              {footerLinks.discover.map(link => (
                <li>
                  <a href={link.href} class="footer-link">
                    <span class="link-text">{link.label}</span>
                    <span class="link-arrow">→</span>
                  </a>
                </li>
              ))}
            </ul>
          </div>

          <div class="link-section">
            <h4 class="section-title">Community</h4>
            <ul class="link-list">
              {footerLinks.community.map(link => (
                <li>
                  <a 
                    href={link.href} 
                    class="footer-link"
                    target={link.external ? '_blank' : undefined}
                    rel={link.external ? 'noopener noreferrer' : undefined}
                  >
                    <span class="link-text">{link.label}</span>
                    <span class="link-arrow">{link.external ? '↗' : '→'}</span>
                  </a>
                </li>
              ))}
            </ul>
          </div>

          <div class="link-section">
            <h4 class="section-title">Pods</h4>
            <ul class="link-list">
              {footerLinks.pods.map(link => (
                <li>
                  <a href={link.href} class="footer-link">
                    <span class="link-text">{link.label}</span>
                    <span class="link-arrow">→</span>
                  </a>
                </li>
              ))}
            </ul>
          </div>

          <div class="link-section">
            <h4 class="section-title">Resources</h4>
            <ul class="link-list">
              {footerLinks.resources.map(link => (
                <li>
                  <a href={link.href} class="footer-link">
                    <span class="link-text">{link.label}</span>
                    <span class="link-arrow">→</span>
                  </a>
                </li>
              ))}
            </ul>
          </div>
        </div>
      </div>

      <!-- Newsletter Section -->
      <div class="newsletter-section">
        <div class="newsletter-content">
          <h3 class="newsletter-title">Join the Scientific Revolution</h3>
          <p class="newsletter-description">
            Get weekly updates on breakthrough research, community projects, and opportunities to contribute.
          </p>
          <form class="newsletter-form" data-newsletter-form>
            <div class="input-wrapper">
              <input 
                type="email" 
                class="neural-input" 
                placeholder="your.email@example.com"
                required
                aria-label="Email address"
              />
              <button type="submit" class="portal-button">
                <span>Subscribe</span>
                <div class="button-glow"></div>
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Bottom Bar -->
    <div class="footer-bottom">
      <div class="bottom-content">
        <p class="copyright">
          © {currentYear} Smarter with Science. Building the future, together.
        </p>
        <div class="bottom-links">
          <a href="/privacy" class="bottom-link">Privacy</a>
          <a href="/terms" class="bottom-link">Terms</a>
          <a href="/code-of-conduct" class="bottom-link">Code of Conduct</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Stanley Quote -->
  <div class="stanley-quote">
    <p>"Your curiosity could spark the next breakthrough."</p>
    <span>- Science Stanley</span>
  </div>
</footer>

<style>
  .footer {
    position: relative;
    background: var(--void-black);
    border-top: 1px solid rgba(102, 51, 153, 0.3);
    overflow: hidden;
  }

  /* Background Effects */
  .footer-bg {
    position: absolute;
    inset: 0;
    pointer-events: none;
  }

  .grid-overlay {
    position: absolute;
    inset: 0;
    background-image: 
      linear-gradient(rgba(102, 51, 153, 0.1) 1px, transparent 1px),
      linear-gradient(90deg, rgba(102, 51, 153, 0.1) 1px, transparent 1px);
    background-size: 50px 50px;
    animation: grid-flow 30s linear infinite;
    opacity: 0.5;
  }

  .particle-field {
    position: absolute;
    inset: 0;
    background: 
      radial-gradient(ellipse at bottom, rgba(102, 51, 153, 0.2) 0%, transparent 70%),
      radial-gradient(ellipse at top right, rgba(0, 212, 255, 0.1) 0%, transparent 50%);
  }

  /* Content */
  .footer-content {
    position: relative;
    z-index: 1;
  }

  .footer-main {
    max-width: 1440px;
    margin: 0 auto;
    padding: 4rem 2rem 2rem;
  }

  .footer-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 3rem;
    margin-bottom: 3rem;
  }

  @media (min-width: 768px) {
    .footer-grid {
      grid-template-columns: 2fr 3fr;
      gap: 4rem;
    }
  }

  /* Brand Section */
  .footer-brand {
    max-width: 400px;
  }

  .brand-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1rem;
  }

  .warp-core-large {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: var(--singularity-gradient);
    box-shadow: 
      0 0 30px rgba(0, 212, 255, 0.6),
      inset 0 0 30px rgba(102, 51, 153, 0.6);
    animation: warp-core-pulse 3s ease-in-out infinite;
  }

  .brand-title {
    font-family: var(--font-display);
    font-size: 1.5rem;
    font-weight: 900;
    background: var(--neural-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    filter: drop-shadow(0 0 20px rgba(102, 51, 153, 0.5));
  }

  .brand-tagline {
    font-size: 1.125rem;
    color: var(--warp-core-blue);
    margin-bottom: 1rem;
    font-weight: 500;
  }

  .brand-description {
    color: var(--text-secondary);
    line-height: 1.6;
    margin-bottom: 2rem;
  }

  /* Social Links */
  .social-links {
    display: flex;
    gap: 1rem;
  }

  .social-link {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: rgba(102, 51, 153, 0.2);
    border: 1px solid rgba(102, 51, 153, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s var(--spring-bounce);
  }

  .social-link:hover {
    background: rgba(0, 212, 255, 0.2);
    border-color: var(--warp-core-blue);
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(0, 212, 255, 0.3);
  }

  .social-icon {
    width: 20px;
    height: 20px;
    background: var(--text-primary);
    transition: all 0.3s ease;
    mask-size: contain;
    mask-repeat: no-repeat;
    mask-position: center;
  }

  .social-icon.discord {
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='black' d='M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z'/%3E%3C/svg%3E");
  }

  .social-icon.github {
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='black' d='M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5c.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34c-.46-1.16-1.11-1.47-1.11-1.47c-.91-.62.07-.6.07-.6c1 .07 1.53 1.03 1.53 1.03c.87 1.52 2.34 1.07 2.91.83c.09-.65.35-1.09.63-1.34c-2.22-.25-4.55-1.11-4.55-4.92c0-1.11.38-2 1.03-2.71c-.1-.25-.45-1.29.1-2.64c0 0 .84-.27 2.75 1.02c.79-.22 1.65-.33 2.5-.33c.85 0 1.71.11 2.5.33c1.91-1.29 2.75-1.02 2.75-1.02c.55 1.35.2 2.39.1 2.64c.65.71 1.03 1.6 1.03 2.71c0 3.82-2.34 4.66-4.57 4.91c.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2'/%3E%3C/svg%3E");
  }

  .social-icon.twitter {
    mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='black' d='M18.244 2.25h3.308l-7.227 8.26l8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z'/%3E%3C/svg%3E");
  }

  .social-link:hover .social-icon {
    filter: drop-shadow(0 0 10px var(--warp-core-blue));
  }

  /* Link Sections */
  .footer-links {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 2rem;
  }

  @media (min-width: 768px) {
    .footer-links {
      gap: 3rem;
    }
  }

  .section-title {
    font-family: var(--font-display);
    font-size: 0.875rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--warp-core-blue);
    margin-bottom: 1rem;
    position: relative;
  }

  .section-title::after {
    content: '';
    position: absolute;
    bottom: -0.5rem;
    left: 0;
    width: 30px;
    height: 2px;
    background: var(--neural-gradient);
    box-shadow: 0 0 10px rgba(102, 51, 153, 0.5);
  }

  .link-list {
    list-style: none;
    margin: 0;
    padding: 0;
  }

  .link-list li {
    margin-bottom: 0.75rem;
  }

  .footer-link {
    display: flex;
    align-items: center;
    justify-content: space-between;
    color: var(--text-secondary);
    text-decoration: none;
    padding: 0.25rem 0;
    transition: all 0.3s ease;
    position: relative;
  }

  .footer-link::before {
    content: '';
    position: absolute;
    inset: -0.25rem -0.5rem;
    background: linear-gradient(90deg, transparent, rgba(0, 212, 255, 0.1));
    opacity: 0;
    transition: opacity 0.3s ease;
    border-radius: 4px;
  }

  .footer-link:hover {
    color: var(--text-primary);
    transform: translateX(4px);
  }

  .footer-link:hover::before {
    opacity: 1;
  }

  .link-arrow {
    opacity: 0;
    transform: translateX(-10px);
    transition: all 0.3s ease;
  }

  .footer-link:hover .link-arrow {
    opacity: 1;
    transform: translateX(0);
  }

  /* Newsletter */
  .newsletter-section {
    background: linear-gradient(135deg, rgba(102, 51, 153, 0.1), rgba(0, 212, 255, 0.05));
    border: 1px solid rgba(102, 51, 153, 0.3);
    border-radius: 12px;
    padding: 2rem;
    margin-top: 3rem;
    position: relative;
    overflow: hidden;
  }

  .newsletter-section::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--neural-gradient);
    opacity: 0.05;
    filter: blur(40px);
  }

  .newsletter-content {
    position: relative;
    max-width: 600px;
    margin: 0 auto;
    text-align: center;
  }

  .newsletter-title {
    font-family: var(--font-display);
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    background: var(--neural-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .newsletter-description {
    color: var(--text-secondary);
    margin-bottom: 1.5rem;
  }

  .newsletter-form {
    display: flex;
    gap: 1rem;
    max-width: 500px;
    margin: 0 auto;
  }

  .input-wrapper {
    display: flex;
    flex: 1;
    gap: 1rem;
    flex-direction: column;
  }

  @media (min-width: 640px) {
    .input-wrapper {
      flex-direction: row;
    }
  }

  .newsletter-form .neural-input {
    flex: 1;
  }

  /* Bottom Bar */
  .footer-bottom {
    border-top: 1px solid rgba(102, 51, 153, 0.2);
    padding: 2rem;
    background: rgba(0, 0, 0, 0.5);
  }

  .bottom-content {
    max-width: 1440px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    text-align: center;
  }

  @media (min-width: 640px) {
    .bottom-content {
      flex-direction: row;
      justify-content: space-between;
      text-align: left;
    }
  }

  .copyright {
    color: var(--text-tertiary);
    font-size: 0.875rem;
  }

  .bottom-links {
    display: flex;
    gap: 2rem;
  }

  .bottom-link {
    color: var(--text-tertiary);
    text-decoration: none;
    font-size: 0.875rem;
    transition: color 0.3s ease;
  }

  .bottom-link:hover {
    color: var(--warp-core-blue);
  }

  /* Stanley Quote */
  .stanley-quote {
    text-align: center;
    padding: 1rem;
    background: rgba(102, 51, 153, 0.1);
    border-top: 1px solid rgba(102, 51, 153, 0.3);
  }

  .stanley-quote p {
    font-size: 1.125rem;
    font-style: italic;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
  }

  .stanley-quote span {
    font-size: 0.875rem;
    color: var(--warp-core-blue);
  }
</style>

<script>
  // Newsletter form handling
  const form = document.querySelector('[data-newsletter-form]') as HTMLFormElement;
  
  if (form) {
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const formData = new FormData(form);
      const email = formData.get('email');
      
      // Add loading state
      const button = form.querySelector('button');
      if (button) {
        button.textContent = 'Subscribing...';
        button.setAttribute('disabled', 'true');
      }
      
      // Simulate API call (replace with actual endpoint)
      setTimeout(() => {
        // Reset form
        form.reset();
        if (button) {
          button.textContent = 'Subscribed!';
          button.style.background = 'var(--plasma-green)';
          
          setTimeout(() => {
            button.textContent = 'Subscribe';
            button.removeAttribute('disabled');
            button.style.background = '';
          }, 3000);
        }
      }, 1500);
    });
  }
</script>